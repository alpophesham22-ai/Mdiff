// عرض العملاء مع زر تعديل
function loadFromDB() {
  getAllClients().then(clients => {
    const tbody = document.querySelector("#customersTable tbody");
    tbody.innerHTML = "";
    clients.forEach(c => {
      const tr = document.createElement("tr");

      [
        c.id, c.name, c.phone, c.subName, c.duration, c.startDate, c.endDate, c.totalAllowed,
        c.remaining.دجاج, c.remaining.لحم, c.remaining.سمك, c.remaining.سناك
      ].forEach(val => {
        const td = document.createElement("td");
        td.textContent = val;
        tr.appendChild(td);
      });

      // عمود تعديل
      const tdEdit = document.createElement("td");
      const btnEdit = document.createElement("button");
      btnEdit.textContent = "✏️ تعديل";
      btnEdit.onclick = () => {
        // تمرير ID العميل لصفحة search.html
        location.href = `search.html?id=${encodeURIComponent(c.id)}`;
      };
      tdEdit.appendChild(btnEdit);
      tr.appendChild(tdEdit);

      tbody.appendChild(tr);
    });

    // تعديل رأس الجدول لإضافة العمود
    const thead = document.querySelector("#customersTable thead tr");
    if (!thead.querySelector(".editHeader")) {
      const th = document.createElement("th");
      th.textContent = "تعديل";
      th.className = "editHeader";
      thead.appendChild(th);
    }
  });
}

loadFromDB();
</script>
</body>
</html>

